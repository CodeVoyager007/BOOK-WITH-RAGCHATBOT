"use strict";(globalThis.webpackChunksentient_machines_handbook=globalThis.webpackChunksentient_machines_handbook||[]).push([[860],{4717:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>c,contentTitle:()=>a,default:()=>m,frontMatter:()=>o,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"ros2/communication","title":"ROS 2 Communication: Topics (Pub/Sub) and Messages","description":"The heart of any distributed robotic system is how its components communicate. In ROS 2, the primary mechanism for asynchronous, many-to-many communication is through Topics, using a Publish-Subscribe model.","source":"@site/docs/02-ros2/02-communication.md","sourceDirName":"02-ros2","slug":"/ros2/communication","permalink":"/BOOK-WITH-RAGCHATBOT/docs/ros2/communication","draft":false,"unlisted":false,"editUrl":"https://github.com/CodeVoyager007/BOOK-WITH-RAGCHATBOT/tree/main/book/docs/02-ros2/02-communication.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"title":"ROS 2 Communication: Topics (Pub/Sub) and Messages","sidebar_label":"Communication"},"sidebar":"tutorialSidebar","previous":{"title":"Architecture","permalink":"/BOOK-WITH-RAGCHATBOT/docs/ros2/architecture"},"next":{"title":"Services & Actions","permalink":"/BOOK-WITH-RAGCHATBOT/docs/ros2/services-actions"}}');var r=n(4848),t=n(8453);const o={title:"ROS 2 Communication: Topics (Pub/Sub) and Messages",sidebar_label:"Communication"},a="ROS 2 Communication: Topics (Pub/Sub) and Messages",c={},l=[{value:"The Publish-Subscribe Model",id:"the-publish-subscribe-model",level:2},{value:"Messages: The Language of ROS 2",id:"messages-the-language-of-ros-2",level:2},{value:"Common Message Types:",id:"common-message-types",level:3},{value:"Example: <code>geometry_msgs/msg/Twist</code>",id:"example-geometry_msgsmsgtwist",level:3},{value:"Creating a Publisher (Python)",id:"creating-a-publisher-python",level:2},{value:"Creating a Subscriber (Python)",id:"creating-a-subscriber-python",level:2}];function d(e){const s={admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.header,{children:(0,r.jsx)(s.h1,{id:"ros-2-communication-topics-pubsub-and-messages",children:"ROS 2 Communication: Topics (Pub/Sub) and Messages"})}),"\n",(0,r.jsxs)(s.p,{children:["The heart of any distributed robotic system is how its components communicate. In ROS 2, the primary mechanism for asynchronous, many-to-many communication is through ",(0,r.jsx)(s.strong,{children:"Topics"}),", using a ",(0,r.jsx)(s.strong,{children:"Publish-Subscribe"})," model."]}),"\n",(0,r.jsx)(s.h2,{id:"the-publish-subscribe-model",children:"The Publish-Subscribe Model"}),"\n",(0,r.jsx)(s.p,{children:"Imagine a busy newsroom. Instead of reporters directly sending articles to every single reader, they publish their stories to different news channels (topics). Readers subscribe to the channels they are interested in."}),"\n",(0,r.jsx)(s.p,{children:"In ROS 2:"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Publishers (Reporters)"}),": Nodes that create and send data."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Subscribers (Readers)"}),": Nodes that receive and process data."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Topics (News Channels)"}),": Named buses over which data flows."]}),"\n"]}),"\n",(0,r.jsx)(s.p,{children:"A publisher sends data to a specific topic, and any node that has subscribed to that topic receives the data. Crucially, publishers and subscribers don't know about each other directly. They only know about the topic. This decoupling is what makes ROS 2 systems flexible and scalable."}),"\n",(0,r.jsx)(s.admonition,{title:"Anonymity and Decoupling",type:"tip",children:(0,r.jsx)(s.p,{children:"Publishers and subscribers are completely decoupled. They can join or leave the network at any time without affecting the others. This makes it easy to swap out components, debug, or add new functionality."})}),"\n",(0,r.jsx)(s.h2,{id:"messages-the-language-of-ros-2",children:"Messages: The Language of ROS 2"}),"\n",(0,r.jsxs)(s.p,{children:["When data is sent over a topic, it must conform to a predefined structure called a ",(0,r.jsx)(s.strong,{children:"Message"}),". ROS 2 messages are strongly typed, ensuring that all publishers and subscribers agree on the format of the data being exchanged."]}),"\n",(0,r.jsxs)(s.p,{children:["Message types are defined in ",(0,r.jsx)(s.code,{children:".msg"})," files, which are compiled into source code in various languages (e.g., Python classes, C++ structs) that your nodes can use."]}),"\n",(0,r.jsx)(s.h3,{id:"common-message-types",children:"Common Message Types:"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"std_msgs/msg/String"}),": A simple string."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"std_msgs/msg/Int32"}),": A 32-bit integer."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"geometry_msgs/msg/Twist"}),": Represents linear and angular velocity, commonly used to command robot movement."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"sensor_msgs/msg/LaserScan"}),": Data from a 2D laser scanner."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"sensor_msgs/msg/Image"}),": Image data from a camera."]}),"\n"]}),"\n",(0,r.jsxs)(s.h3,{id:"example-geometry_msgsmsgtwist",children:["Example: ",(0,r.jsx)(s.code,{children:"geometry_msgs/msg/Twist"})]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-python",children:"# A typical Twist message\n# Linear velocity in x, y, z axes\nlinear:\n  x: 0.5  # move forward at 0.5 m/s\n  y: 0.0\n  z: 0.0\n# Angular velocity in x, y, z axes (for rotation around axes)\nangular:\n  x: 0.0\n  y: 0.0\n  z: 0.2  # turn counter-clockwise at 0.2 rad/s\n"})}),"\n",(0,r.jsx)(s.h2,{id:"creating-a-publisher-python",children:"Creating a Publisher (Python)"}),"\n",(0,r.jsxs)(s.p,{children:["Let's look at a simple Python example of a node that publishes ",(0,r.jsx)(s.code,{children:"Twist"})," messages to a topic named ",(0,r.jsx)(s.code,{children:"/cmd_vel"})," (a common topic for robot velocity commands)."]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-python",children:"import rclpy\nfrom rclpy.node import Node\nfrom geometry_msgs.msg import Twist\n\nclass MinimalPublisher(Node):\n\n    def __init__(self):\n        super().__init__('minimal_publisher')\n        self.publisher_ = self.create_publisher(Twist, 'cmd_vel', 10)\n        timer_period = 0.5  # seconds\n        self.timer = self.create_timer(timer_period, self.timer_callback)\n        self.i = 0\n\n    def timer_callback(self):\n        msg = Twist()\n        msg.linear.x = 0.5 # Move forward\n        msg.angular.z = 0.0 # Don't turn\n        self.publisher_.publish(msg)\n        self.get_logger().info(f'Publishing: \"Linear X: {msg.linear.x}, Angular Z: {msg.angular.z}\"')\n        self.i += 1\n\ndef main(args=None):\n    rclpy.init(args=args)\n    minimal_publisher = MinimalPublisher()\n    rclpy.spin(minimal_publisher) # Keep the node alive until Ctrl+C\n    minimal_publisher.destroy_node()\n    rclpy.shutdown()\n\nif __name__ == '__main__':\n    main()\n"})}),"\n",(0,r.jsx)(s.h2,{id:"creating-a-subscriber-python",children:"Creating a Subscriber (Python)"}),"\n",(0,r.jsxs)(s.p,{children:["And a corresponding subscriber that prints the received ",(0,r.jsx)(s.code,{children:"Twist"})," messages."]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-python",children:"import rclpy\nfrom rclpy.node import Node\nfrom geometry_msgs.msg import Twist\n\nclass MinimalSubscriber(Node):\n\n    def __init__(self):\n        super().__init__('minimal_subscriber')\n        self.subscription = self.create_subscription(\n            Twist,\n            'cmd_vel',\n            self.listener_callback,\n            10)\n        self.subscription  # prevent unused variable warning\n\n    def listener_callback(self, msg):\n        self.get_logger().info(f'I heard: \"Linear X: {msg.linear.x}, Angular Z: {msg.angular.z}\"')\n\ndef main(args=None):\n    rclpy.init(args=args)\n    minimal_subscriber = MinimalSubscriber()\n    rclpy.spin(minimal_subscriber)\n    minimal_subscriber.destroy_node()\n    rclpy.shutdown()\n\nif __name__ == '__main__':\n    main()\n"})}),"\n",(0,r.jsx)(s.p,{children:"This publish-subscribe model, combined with strongly typed messages, forms the fundamental communication pattern in ROS 2, allowing for robust and flexible distributed robotic applications."})]})}function m(e={}){const{wrapper:s}={...(0,t.R)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},8453:(e,s,n)=>{n.d(s,{R:()=>o,x:()=>a});var i=n(6540);const r={},t=i.createContext(r);function o(e){const s=i.useContext(t);return i.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function a(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),i.createElement(t.Provider,{value:s},e.children)}}}]);